<!DOCTYPE html>
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<title>Stomping Grounds</title>

		<!-- Mobile Meta -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- Favicon -->
		<link rel="shortcut icon" href="images/favicon.ico">

		<!-- Web Fonts -->
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700,300&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Raleway:700,400,300' rel='stylesheet' type='text/css'>

		<!-- Bootstrap core CSS -->
		<link href="../static/bootstrap/css/bootstrap.css" rel="stylesheet">

		<!-- Font Awesome CSS -->
		<link href="../static/fonts/font-awesome/css/font-awesome.css" rel="stylesheet">

		<!-- Plugins -->
		<link href="../static/css/animations.css" rel="stylesheet">

		<!-- Worthy core CSS file -->
		<link href="../static/css/style.css" rel="stylesheet">

		<!-- Custom css --> 
		<link href="../static/css/custom.css" rel="stylesheet">
		<style type="text/css">
        #map { height: 360px; width: 100%}
        #floating-panel {
  							position: absolute;
  							top: 10px;
  							left: 25%;
  							z-index: 5;
  							background-color: #fff;
  							padding: 5px;
  							border: 1px solid #999;
  							text-align: center;
  							font-family: 'Helvetica','sans-serif';
  							line-height: 20px;
  							padding-left: 10px;
						}

      					#floating-panel {
        					background-color: #fff;
        					border: 0px solid #999;
        					left: 25%;
        					padding: 5px;
        					position: absolute;
        					top: 10px;
        					z-index: 5;
      					}
        </style>
	</head>

	<body class="no-trans">
		<!-- scrollToTop -->
		<!-- ================ -->
		<div class="scrollToTop"><i class="icon-up-open-big"></i></div>

		<!-- header start -->
		<!-- ================ -->
		<header class="header fixed navbar navbar-fixed-top">
			<div class="container">
				<div class="row">
					<div class="col-md-6">

						<!-- header-left start -->
						<!-- ================ -->
						<div class="header-left clearfix">

							<!-- logo -->
							<div class="logo smooth-scroll">
								<!--<a href="#banner"><img id="logo" src="images/logo.png" alt="Worthy"></a> -->
							</div>
							<!-- name-and-slogan -->
							<div class="site-name-and-slogan smooth-scroll">
								<div class="site-name"><a href="#banner">Stomping Grounds</a></div>
								<div class="site-slogan">Combine geospatial datasets to find the perfect location for your new home or business.</div>
							</div>

						</div>
						<!-- header-left end -->

					</div>
				</div>
			</div>
		</header>
        <!-- banner start -->
		<!-- ================ -->
		<!-- header end -->
        <!--recommendation section start-->
        <div class="section clearfix object-non-visible" data-animation-effect="fadeIn">
			<div class="container">
                <div class="row centered">
                    <div id="recommendation"></div>
                    <div class="col-md-12" data-animation-effect="fadein">
                        <h1 class="text-center">Find your new Stomping Grounds in Baltimore City</h1>
                        <p class="lead text-left">
						    Rate each factor according to your own preference (negative (-), neutral (0) or positive (+)), then click 'submit' to view your recommendation!
						</p>
                    </div>
                </div>
				<div class="row">
					<div class="col-md-4" data-animation-effect="fadeIn">
						<p class="lead text-right" align="right">
                            <form id='index' method='POST' action='/#recommendation' >
                                &nbsp;-&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;+<br>
                                <input type="radio" name="crime" value="-1">&nbsp;
                                <input type="radio" name="crime" value="0" checked>&nbsp;
                                <input type="radio" name="crime" value="1">&nbsp; Crime<br>

                                <input type="radio" name="vacancy" value="-1">&nbsp;
                                <input type="radio" name="vacancy" value="0" checked>&nbsp;
                                <input type="radio" name="vacancy" value="1">&nbsp; Vacant Properties<br>

                                <input type="radio" name="grocery" value="-1">&nbsp;
                                <input type="radio" name="grocery" value="0" checked>&nbsp;
                                <input type="radio" name="grocery" value="1">&nbsp; Grocery Stores<br>

                                <input type="radio" name="restaurant" value="-1">&nbsp;
                                <input type="radio" name="restaurant" value="0" checked>&nbsp;
                                <input type="radio" name="restaurant" value="1"> &nbsp;Restaurants<br>

                                <input type="radio" name="schools" value="-1">&nbsp;
                                <input type="radio" name="schools" value="0" checked>&nbsp;
                                <input type="radio" name="schools" value="1">&nbsp; Schools (K-12)<br>

                                <input type="radio" name="museums" value="-1">&nbsp;
                                <input type="radio" name="museums" value="0" checked>&nbsp;
                                <input type="radio" name="museums" value="1">&nbsp; Museums<br>

                                <input type="radio" name="parks" value="-1">&nbsp;
                                <input type="radio" name="parks" value="0" checked>&nbsp;
                                <input type="radio" name="parks" value="1">&nbsp; Public Parks<br>

                                <input type="radio" name="liquor" value="-1">&nbsp;
                                <input type="radio" name="liquor" value="0" checked>&nbsp;
                                <input type="radio" name="liquor" value="1">&nbsp; Bars and Liquor Sales<br>

                                <input type="radio" name="libraries" value="-1">&nbsp;
                                <input type="radio" name="libraries" value="0" checked>&nbsp;
                                <input type="radio" name="libraries" value="1">&nbsp; Public Libraries<br>
                                <br>
        					    <button type="submit" class="btn btn-default">submit</button>
                            </form>
     					</p>
					</div>
					<div class="col-md-8" data-animation-effect="fadeIn">
    					<div id="map"></div>
    						<script type="text/javascript">
								var map, heatmap;

								function initMap() {
									map = new google.maps.Map(document.getElementById('map'), {
											center: {lat: 39.294631, lng: -76.613419},
											zoom: 11,
											scrollwheel: false
											});

									heatmap = new google.maps.visualization.HeatmapLayer({
												data: getPoints(),
												map: map,
												radius: 20
												});
								}

								// Heatmap data: 500 Points
								function getPoints() {
								    return [{{ to_gmap|join(', ') }}]
								    }
							</script>
							<script async defer
							src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDpgGfbV2Ogvfk8Y2z3pfa4d9FA4f5tFsU&libraries=visualization&callback=initMap">
							</script>
						</div>
					</div>
				</div>
			</div>
        <div class="section clearfix object-non-visible" data-animation-effect="fadeIn">
			<div class="container">
                <div class="row-md-12"><h1 align="center">How it works</h1></div>
                <div class="row">
                    <div class="col-md-4 centered" data-animation-effect="fadeIn">
                        <br>
							<iframe width="100%" height="360" frameborder="0" src="https://dvdwllc.cartodb.com/viz/5199023e-b948-11e5-9060-0e31c9be1b51/embed_map" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>
                    </div>
                    <div class="col-md-8">
                        <h2 class="text text-left" align="left">Visualizing geospatial data... the old way.</h2>
                        <p class="lead text-left" align="left">
                            Of course, each of the datasets above can be plotted on a map without any manipulation. However, when multiple datasets are combined, the resulting map can be very difficult to interpret. For example, there are hundreds of restaurants in Baltimore, but only a handful of full grocery stores. If we plot these datasets on the same map, the restaurants significantly overwhelm the grocery stores, even if we play with the sizes and colors of the points. Add a huge dataset, like all of the arrests that occurred in 2015, and the map doesn't make much sense at all.
                            <br>You can see this effect by toggling the visible datasets in the map to the left (above, on mobile).
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-4 centered" data-animation-effect="fadeIn">
                        <br>
                        <img src="static/KDE.png" width="100%">
                    </div>
                    <div class="col-md-8">
                        <h2 class="text text-left" align="left">Kernel density estimation to the rescue!</h2>
                        <p class="lead text-left" align="left">
                            Rather than plotting every single point, we can represent a dataset by estimating its density at each point in the map.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-4" centered data-animation-effect="fadeIn">
                        <br>
                        <img src="static/all_maps_crop.png" width="100%">
                    </div>
                    <div class="col-md-8">
                        <h2 class="text text-left" align="left">Combine weighted maps based on user preference</h2>
                        <p class="lead text-left" align="left">
                            We make no assumptions about what our users are searching for, and instead give them control over how their recommendation is produced. When the user enters their preferences and clicks 'submit', all of the specified density maps are weighted and combined according to user preference. We then suggest areas of the resulting map that have the highest overall density.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="section clearfix object-non-visible" data-animation-effect="fadeIn">
			<div class="container">
                <div class="row">
                    <div class="col-md-12" data-animation-effect="fadeIn">
                        <h2 class="text text-left" align="left">What's next?</h2>
                        <p class="lead text-left" align="left">
                            We're working on applying unsupervised machine learning algorithms, such as K-means clustering, in order to uncover hidden neighborhood dynamics and relationships. Check out <a href="https://github.com/dvdwllc/loc_rec/blob/master/clustering.ipynb">this ipython notebook</a> to see some of the early progress that has been made.
                        </p>
                    </div>
                </div>
            </div>
        </div>
		
		
		<!-- footer start -->
		<!-- ================ -->


		<!-- footer end -->
        <div class="subfooter">
            <div class="container">
                <div class="row">
                    <div class="col-md-2 centered">
                        <p>
                            View the code:
                        </p>
                        <h2>
                            <a target="_blank" href="http://github.com/dvdwllc/loc_rec"><i class="fa fa-github"></i></a>
                        </h2>
                    </div>
                    <div class="col-md-2 centered">
                        <p>
                            Get in touch:
                        </p>
                        <h2>
                            <a href="mailto:david.c.wallace@mg.thedataincubator.com"><i class="fa fa-envelope"></i></a>
                            <a target="_blank" href="http://davidcwallace.com"><i class="fa fa-globe"></i></a>
                            <a target="_blank" href="http://www.linkedin.com/in/davidcwallace"><i class="fa fa-linkedin"></i></a>
                        </h2>
                    </div>
                </div>
            </div>
        </div>
		<!-- JavaScript files placed at the end of the document so the pages load faster
		================================================== -->
		<!-- Jquery and Bootstap core js files -->
		<script type="text/javascript" src="../static/plugins/jquery.min.js"></script>
		<script type="text/javascript" src="static/bootstrap/js/bootstrap.min.js"></script>

		<!-- Modernizr javascript -->
		<script type="text/javascript" src="../static/plugins/modernizr.js"></script>

		<!-- Isotope javascript -->
		<script type="text/javascript" src="../static/plugins/isotope/isotope.pkgd.min.js"></script>
		
		<!-- Backstretch javascript -->
		<script type="text/javascript" src="../static/plugins/jquery.backstretch.min.js"></script>

		<!-- Appear javascript -->
		<script type="text/javascript" src="../static/plugins/jquery.appear.js"></script>

		<!-- Initialization of Plugins -->
		<script type="text/javascript" src="../static/js/template.js"></script>

		<!-- Custom Scripts -->
		<script type="text/javascript" src="../static/js/custom.js"></script>

	</body>
</html>